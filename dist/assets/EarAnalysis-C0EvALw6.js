import{d as w,o as i,c as r,a as e,w as l,e as n,h as p,t as d,F as b,x as h,r as u,L as A,f as x,M as R,N as $,O as I,P as T,Q as U,R as N,S as C}from"./vendor-BP1jr3bt.js";import{u as D}from"./analysis-Crgjx2w2.js";import{R as L,A as V,U as z,L as B,c as F}from"./ReportCard-CUvSQNig.js";import{_ as E}from"./index-BvwGMFbf.js";const P=a=>new Promise(f=>setTimeout(f,a)),M=async a=>(await P(2e3),{id:Date.now().toString(),timestamp:new Date().toISOString(),analysisType:"ear",features:{earColor:"正常",earShape:"正常",earTexture:"正常",auricle:"正常"},constitution:{type:"平和质",probability:75,description:"耳部色泽正常，形态良好"},healthAdvice:{diet:["保持均衡饮食","多食补肾食物"],lifestyle:["规律作息","适度运动"],precautions:["注意耳部卫生","避免噪音环境"]},confidence:87}),O={class:"ear-report"},Q={class:"section"},j={class:"section"},q={class:"section"},G={class:"advice-list"},H={class:"advice-list"},J={class:"advice-list"},K=w({__name:"EarReport",props:{data:{}},setup(a){return(f,s)=>{const o=u("el-descriptions-item"),_=u("el-descriptions"),v=u("el-progress"),y=u("el-alert"),m=u("el-tab-pane"),g=u("el-tabs");return i(),r("div",O,[e(L,{title:"耳诊分析报告",confidence:a.data.confidence},{default:l(()=>[n("div",Q,[s[0]||(s[0]=n("h4",{class:"section-title"},"耳部特征",-1)),e(_,{column:2,border:""},{default:l(()=>[e(o,{label:"耳色"},{default:l(()=>[p(d(a.data.features.earColor),1)]),_:1}),e(o,{label:"耳形"},{default:l(()=>[p(d(a.data.features.earShape),1)]),_:1}),e(o,{label:"耳质"},{default:l(()=>[p(d(a.data.features.earTexture),1)]),_:1}),e(o,{label:"耳廓状态"},{default:l(()=>[p(d(a.data.features.auricle),1)]),_:1})]),_:1})]),n("div",j,[s[1]||(s[1]=n("h4",{class:"section-title"},"体质分析",-1)),e(y,{title:a.data.constitution.type,type:"info",closable:!1},{default:l(()=>[n("p",null,d(a.data.constitution.description),1),e(v,{percentage:a.data.constitution.probability},null,8,["percentage"])]),_:1},8,["title"])]),n("div",q,[s[2]||(s[2]=n("h4",{class:"section-title"},"健康建议",-1)),e(g,null,{default:l(()=>[e(m,{label:"饮食建议"},{default:l(()=>[n("ul",G,[(i(!0),r(b,null,h(a.data.healthAdvice.diet,(c,t)=>(i(),r("li",{key:t},d(c),1))),128))])]),_:1}),e(m,{label:"生活方式"},{default:l(()=>[n("ul",H,[(i(!0),r(b,null,h(a.data.healthAdvice.lifestyle,(c,t)=>(i(),r("li",{key:t},d(c),1))),128))])]),_:1}),e(m,{label:"注意事项"},{default:l(()=>[n("ul",J,[(i(!0),r(b,null,h(a.data.healthAdvice.precautions,(c,t)=>(i(),r("li",{key:t},d(c),1))),128))])]),_:1})]),_:1})])]),_:1},8,["confidence"])])}}}),W=E(K,[["__scopeId","data-v-fd998946"]]),X={class:"analysis-container"},Y={class:"container"},Z={key:0,class:"step-content"},ee={key:1,class:"step-content"},te={key:2,class:"step-content"},ae={class:"action-buttons"},se=w({__name:"EarAnalysis",setup(a){const f=D(),s=I(1),o=I(null),_=I(""),v=[{title:"上传图片",description:"选择或拖拽耳部照片",icon:T},{title:"AI分析",description:"正在分析中",icon:U},{title:"查看报告",description:"分析完成",icon:N}],y=async c=>{try{_.value=F(c),s.value=2;const t=await M(c);o.value=t,s.value=3}catch(t){C.error("分析失败，请重试"),s.value=1,console.error("分析错误:",t)}},m=()=>{o.value&&(f.addRecord({id:o.value.id,analysisType:"ear",timestamp:o.value.timestamp,imageUrl:_.value,result:o.value}),C.success("报告已保存到历史记录"))},g=()=>{s.value=1,o.value=null,_.value=""};return(c,t)=>{const S=u("el-icon"),k=u("el-button");return i(),r("div",X,[n("div",Y,[t[2]||(t[2]=n("h1",{class:"page-title"},"耳诊分析",-1)),t[3]||(t[3]=n("p",{class:"page-description"},"请上传清晰的耳部照片，AI将为您分析耳部特征和健康状况",-1)),e(V,{steps:v,"current-step":s.value},null,8,["current-step"]),s.value===1?(i(),r("div",Z,[e(z,{onImageUploaded:y})])):A("",!0),s.value===2?(i(),r("div",ee,[e(B,{message:"AI正在分析耳部特征，请稍候..."})])):A("",!0),s.value===3&&o.value?(i(),r("div",te,[e(W,{data:o.value},null,8,["data"]),n("div",ae,[e(k,{type:"primary",size:"large",onClick:m},{default:l(()=>[e(S,null,{default:l(()=>[e(x(R))]),_:1}),t[0]||(t[0]=p(" 保存报告 ",-1))]),_:1}),e(k,{size:"large",onClick:g},{default:l(()=>[e(S,null,{default:l(()=>[e(x($))]),_:1}),t[1]||(t[1]=p(" 重新分析 ",-1))]),_:1})])])):A("",!0)])])}}}),re=E(se,[["__scopeId","data-v-470ca1bf"]]);export{re as default};

import{d as N,o as c,c as m,e as t,a as o,w as n,h as a,f as k,W as H,F,x as E,O as R,k as U,r as u,b as z,i as A,L,t as _,a0 as w,S as x}from"./vendor-BP1jr3bt.js";import{u as $}from"./analysis-Crgjx2w2.js";import{_ as I}from"./index-BvwGMFbf.js";const O=(y,f="YYYY-MM-DD HH:mm:ss")=>{const l=typeof y=="string"?new Date(y):y,d=l.getFullYear(),p=String(l.getMonth()+1).padStart(2,"0"),g=String(l.getDate()).padStart(2,"0"),v=String(l.getHours()).padStart(2,"0"),S=String(l.getMinutes()).padStart(2,"0"),b=String(l.getSeconds()).padStart(2,"0");return f.replace("YYYY",String(d)).replace("MM",p).replace("DD",g).replace("HH",v).replace("mm",S).replace("ss",b)},W={class:"history-view"},j={class:"container"},q={class:"filter-bar"},G={key:0,class:"empty-state"},J={key:1,class:"history-list"},K={class:"card-content"},P={key:0,class:"record-image"},Q=["src","alt"],X={class:"record-info"},Z={class:"record-header"},ee={class:"record-time"},te={class:"record-details"},se={class:"record-actions"},oe=N({__name:"HistoryView",setup(y){const f=z(),l=$(),d=R("all"),p=U(()=>d.value==="all"?l.allHistory:l.getHistoryByType(d.value)),g=r=>({tongue:"舌诊",face:"面诊",eye:"眼诊",palm:"掌纹",ear:"耳诊"})[r]||r,v=r=>({tongue:"danger",face:"warning",eye:"success",palm:"info",ear:""})[r]||"",S=()=>{},b=r=>{const i={tongue:"/tongue",face:"/face",eye:"/eye",palm:"/palm",ear:"/ear"}[r.analysisType];i&&f.push(i)},C=r=>{w.confirm("确定要删除这条记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.removeRecord(r),x.success("删除成功")}).catch(()=>{})},h=()=>{w.confirm("确定要清空所有记录吗？此操作不可恢复！","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.clearHistory(),x.success("已清空所有记录")}).catch(()=>{})};return(r,e)=>{const i=u("el-radio-button"),B=u("el-radio-group"),T=u("el-button"),M=u("el-empty"),D=u("el-tag"),V=u("el-card");return c(),m("div",W,[t("div",j,[e[12]||(e[12]=t("h1",{class:"page-title"},"历史记录",-1)),t("div",q,[o(B,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),onChange:S},{default:n(()=>[o(i,{label:"all"},{default:n(()=>[...e[1]||(e[1]=[a("全部",-1)])]),_:1}),o(i,{label:"tongue"},{default:n(()=>[...e[2]||(e[2]=[a("舌诊",-1)])]),_:1}),o(i,{label:"face"},{default:n(()=>[...e[3]||(e[3]=[a("面诊",-1)])]),_:1}),o(i,{label:"eye"},{default:n(()=>[...e[4]||(e[4]=[a("眼诊",-1)])]),_:1}),o(i,{label:"palm"},{default:n(()=>[...e[5]||(e[5]=[a("掌纹",-1)])]),_:1}),o(i,{label:"ear"},{default:n(()=>[...e[6]||(e[6]=[a("耳诊",-1)])]),_:1})]),_:1},8,["modelValue"]),o(T,{type:"danger",icon:k(H),onClick:h,disabled:p.value.length===0},{default:n(()=>[...e[7]||(e[7]=[a(" 清空记录 ",-1)])]),_:1},8,["icon","disabled"])]),p.value.length===0?(c(),m("div",G,[o(M,{description:"暂无分析记录"})])):(c(),m("div",J,[(c(!0),m(F,null,E(p.value,s=>(c(),A(V,{key:s.id,class:"history-card",shadow:"hover"},{default:n(()=>[t("div",K,[s.imageUrl?(c(),m("div",P,[t("img",{src:s.imageUrl,alt:g(s.analysisType)},null,8,Q)])):L("",!0),t("div",X,[t("div",Z,[o(D,{type:v(s.analysisType)},{default:n(()=>[a(_(g(s.analysisType)),1)]),_:2},1032,["type"]),t("span",ee,_(k(O)(s.timestamp)),1)]),t("div",te,[t("p",null,[e[8]||(e[8]=t("strong",null,"体质类型：",-1)),a(_(s.result.constitution.type),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"置信度：",-1)),a(_(s.result.confidence)+"%",1)])]),t("div",se,[o(T,{type:"primary",size:"small",onClick:Y=>b(s)},{default:n(()=>[...e[10]||(e[10]=[a(" 查看详情 ",-1)])]),_:1},8,["onClick"]),o(T,{type:"danger",size:"small",icon:k(H),onClick:Y=>C(s.id)},{default:n(()=>[...e[11]||(e[11]=[a(" 删除 ",-1)])]),_:1},8,["icon","onClick"])])])])]),_:2},1024))),128))]))])])}}}),re=I(oe,[["__scopeId","data-v-ece83aa5"]]);export{re as default};

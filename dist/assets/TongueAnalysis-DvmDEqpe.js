import{d as x,o as r,c as u,a as e,w as t,e as n,h as c,t as i,F as A,x as I,r as _,f as y,I as R,J as $,K as U,L as C,M as N,N as D,O as S,P as L,Q as P,R as V,S as T}from"./vendor-BP1jr3bt.js";import{u as z}from"./analysis-Crgjx2w2.js";import{R as B,A as F,U as E,L as M,c as O}from"./ReportCard-CUvSQNig.js";import{_ as w}from"./index-BvwGMFbf.js";const J=a=>new Promise(g=>setTimeout(g,a)),K=async a=>(await J(2e3),{id:Date.now().toString(),timestamp:new Date().toISOString(),analysisType:"tongue",features:{tongueColor:"淡红",coatingColor:"薄白",tongueShape:"齿痕舌",coatingThickness:"薄",moisture:"适中",texture:"细腻"},constitution:{type:"气虚质",probability:85,description:"气短懒言，容易疲乏"},healthAdvice:{diet:["多吃山药、红枣、小米粥","避免生冷寒凉食物"],lifestyle:["适度运动如太极拳","保证充足睡眠"],precautions:["注意防寒保暖","避免过度劳累"]},confidence:92}),Q={class:"tongue-report"},j={class:"section"},q={class:"section"},G={class:"probability-text"},H={class:"section"},W={class:"advice-list"},X={class:"advice-list"},Y={class:"advice-list"},Z=x({__name:"TongueReport",props:{data:{}},setup(a){const g=l=>l>=80?"#67c23a":l>=60?"#e6a23c":"#f56c6c";return(l,s)=>{const d=_("el-descriptions-item"),b=_("el-descriptions"),h=_("el-progress"),k=_("el-alert"),v=_("el-icon"),m=_("el-tab-pane"),o=_("el-tabs");return r(),u("div",Q,[e(B,{title:"舌诊分析报告",confidence:a.data.confidence},{default:t(()=>[n("div",j,[s[0]||(s[0]=n("h4",{class:"section-title"},"舌象特征",-1)),e(b,{column:2,border:""},{default:t(()=>[e(d,{label:"舌色"},{default:t(()=>[c(i(a.data.features.tongueColor),1)]),_:1}),e(d,{label:"苔色"},{default:t(()=>[c(i(a.data.features.coatingColor),1)]),_:1}),e(d,{label:"舌形"},{default:t(()=>[c(i(a.data.features.tongueShape),1)]),_:1}),e(d,{label:"苔质"},{default:t(()=>[c(i(a.data.features.coatingThickness),1)]),_:1}),e(d,{label:"润燥"},{default:t(()=>[c(i(a.data.features.moisture),1)]),_:1}),e(d,{label:"质地"},{default:t(()=>[c(i(a.data.features.texture),1)]),_:1})]),_:1})]),n("div",q,[s[1]||(s[1]=n("h4",{class:"section-title"},"体质分析",-1)),e(k,{title:a.data.constitution.type,type:"info",closable:!1},{default:t(()=>[n("p",null,i(a.data.constitution.description),1),e(h,{percentage:a.data.constitution.probability,color:g(a.data.constitution.probability)},null,8,["percentage","color"]),n("p",G,"匹配度: "+i(a.data.constitution.probability)+"%",1)]),_:1},8,["title"])]),n("div",H,[s[2]||(s[2]=n("h4",{class:"section-title"},"健康建议",-1)),e(o,null,{default:t(()=>[e(m,{label:"饮食建议"},{default:t(()=>[n("ul",W,[(r(!0),u(A,null,I(a.data.healthAdvice.diet,(f,p)=>(r(),u("li",{key:p},[e(v,null,{default:t(()=>[e(y(R))]),_:1}),c(" "+i(f),1)]))),128))])]),_:1}),e(m,{label:"生活方式"},{default:t(()=>[n("ul",X,[(r(!0),u(A,null,I(a.data.healthAdvice.lifestyle,(f,p)=>(r(),u("li",{key:p},[e(v,null,{default:t(()=>[e(y($))]),_:1}),c(" "+i(f),1)]))),128))])]),_:1}),e(m,{label:"注意事项"},{default:t(()=>[n("ul",Y,[(r(!0),u(A,null,I(a.data.healthAdvice.precautions,(f,p)=>(r(),u("li",{key:p},[e(v,null,{default:t(()=>[e(y(U))]),_:1}),c(" "+i(f),1)]))),128))])]),_:1})]),_:1})])]),_:1},8,["confidence"])])}}}),ee=w(Z,[["__scopeId","data-v-4277e2cc"]]),te={class:"analysis-container"},ae={class:"container"},se={key:0,class:"step-content"},ne={key:1,class:"step-content"},oe={key:2,class:"step-content"},le={class:"action-buttons"},ie=x({__name:"TongueAnalysis",setup(a){const g=z(),l=S(1),s=S(null),d=S(""),b=[{title:"上传图片",description:"选择或拖拽舌象照片",icon:L},{title:"AI分析",description:"正在分析中",icon:P},{title:"查看报告",description:"分析完成",icon:V}],h=async m=>{try{d.value=O(m),l.value=2;const o=await K(m);s.value=o,l.value=3}catch(o){T.error("分析失败，请重试"),l.value=1,console.error("分析错误:",o)}},k=()=>{s.value&&(g.addRecord({id:s.value.id,analysisType:"tongue",timestamp:s.value.timestamp,imageUrl:d.value,result:s.value}),T.success("报告已保存到历史记录"))},v=()=>{l.value=1,s.value=null,d.value=""};return(m,o)=>{const f=_("el-icon"),p=_("el-button");return r(),u("div",te,[n("div",ae,[o[2]||(o[2]=n("h1",{class:"page-title"},"舌诊分析",-1)),o[3]||(o[3]=n("p",{class:"page-description"},"请上传清晰的舌象照片，AI将为您分析舌色、苔质等特征",-1)),e(F,{steps:b,"current-step":l.value},null,8,["current-step"]),l.value===1?(r(),u("div",se,[e(E,{onImageUploaded:h})])):C("",!0),l.value===2?(r(),u("div",ne,[e(M,{message:"AI正在分析舌象，请稍候..."})])):C("",!0),l.value===3&&s.value?(r(),u("div",oe,[e(ee,{data:s.value},null,8,["data"]),n("div",le,[e(p,{type:"primary",size:"large",onClick:k},{default:t(()=>[e(f,null,{default:t(()=>[e(y(N))]),_:1}),o[0]||(o[0]=c(" 保存报告 ",-1))]),_:1}),e(p,{size:"large",onClick:v},{default:t(()=>[e(f,null,{default:t(()=>[e(y(D))]),_:1}),o[1]||(o[1]=c(" 重新分析 ",-1))]),_:1})])])):C("",!0)])])}}}),_e=w(ie,[["__scopeId","data-v-9a7f5d4e"]]);export{_e as default};
